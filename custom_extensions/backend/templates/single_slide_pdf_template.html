<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slide PDF</title>
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #1a1a1a;
            background: white;
        }

        /* Slide container */
        .slide-page {
            width: {{ slide_width }}px;
            height: {{ slide_height }}px;
            position: relative;
            overflow: hidden;
            background: white;
        }

        .slide-content {
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* Theme-based styling */
        {% if theme == 'dark-purple' %}
        .slide-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        {% elif theme == 'light-modern' %}
        .slide-page {
            background: #ffffff;
            color: #1a1a1a;
        }
        {% elif theme == 'dark-blue' %}
        .slide-page {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }
        {% elif theme == 'light-blue' %}
        .slide-page {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            color: #1a1a1a;
        }
        {% else %}
        .slide-page {
            background: #ffffff;
            color: #1a1a1a;
        }
        {% endif %}

        /* Common text styles */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            line-height: 1.2;
            margin-bottom: 0.5em;
        }

        h1 { font-size: 2.5rem; }
        h2 { font-size: 2rem; }
        h3 { font-size: 1.5rem; }
        h4 { font-size: 1.25rem; }

        p {
            margin-bottom: 1em;
            line-height: 1.6;
        }

        /* Image styles */
        img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        /* List styles */
        ul, ol {
            margin-left: 1.5em;
            margin-bottom: 1em;
        }

        li {
            margin-bottom: 0.5em;
        }

        /* Template-specific styles */
        {% if slide.templateId == 'title-slide' %}
        .title-slide {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 80px;
            height: 100%;
        }

        .title-slide h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .title-slide .subtitle {
            font-size: 1.5rem;
            opacity: 0.9;
            margin-bottom: 2rem;
        }

        .title-slide .author {
            font-size: 1.2rem;
            opacity: 0.8;
        }

        .title-slide .date {
            font-size: 1rem;
            opacity: 0.7;
            margin-top: 0.5rem;
        }
        {% endif %}

        {% if slide.templateId == 'content-slide' %}
        .content-slide {
            padding: 80px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        .content-slide h1 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
        }

        .content-slide .content {
            font-size: 1.3rem;
            line-height: 1.8;
        }
        {% endif %}

        {% if slide.templateId == 'bullet-points' %}
        .bullet-points {
            padding: 80px;
            height: 100%;
        }

        .bullet-points h1 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
        }

        .bullet-points ul {
            list-style: none;
            margin-left: 0;
        }

        .bullet-points li {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            padding-left: 2rem;
            position: relative;
        }

        .bullet-points li:before {
            content: "â€¢";
            position: absolute;
            left: 0;
            font-size: 1.5rem;
            font-weight: bold;
        }

        {% if slide.props.bulletStyle == 'check' %}
        .bullet-points li:before {
            content: "âœ“";
        }
        {% elif slide.props.bulletStyle == 'arrow' %}
        .bullet-points li:before {
            content: "â†’";
        }
        {% elif slide.props.bulletStyle == 'dash' %}
        .bullet-points li:before {
            content: "â€”";
        }
        {% endif %}
        {% endif %}

        {% if slide.templateId == 'big-image-left' %}
        .big-image-left {
            display: flex;
            height: 100%;
            align-items: stretch;
        }

        .big-image-left .image-container {
            flex: 0 0 40%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            min-width: 0;
        }

        .big-image-left .content-container {
            flex: 1 1 60%;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-width: 0;
        }

        .big-image-left h1 {
            font-size: 2.5rem;
            margin-bottom: 24px;
            line-height: 1.2;
        }

        .big-image-left .subtitle {
            font-size: 1.3rem;
            line-height: 1.6;
        }

        .big-image-left img {
            width: 100%;
            height: 100%;
            object-fit: {{ slide.props.objectFit or 'contain' }};
            border-radius: 8px;
        }

        /* Handle image positioning and sizing */
        {% if slide.props.imageOffset %}
        .big-image-left .image-container img {
            transform: translate({{ slide.props.imageOffset.x or 0 }}px, {{ slide.props.imageOffset.y or 0 }}px);
        }
        {% endif %}

        {% if slide.props.widthPx and slide.props.heightPx %}
        .big-image-left .image-container img {
            width: {{ slide.props.widthPx }}px !important;
            height: {{ slide.props.heightPx }}px !important;
        }
        {% endif %}
        {% endif %}

        {% if slide.templateId == 'two-column' %}
        .two-column {
            padding: 80px;
            height: 100%;
        }

        .two-column h1 {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 3rem;
        }

        .two-column .columns {
            display: flex;
            gap: 60px;
            height: calc(100% - 200px);
        }

        .two-column .column {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .two-column .column h2 {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
        }

        .two-column .column p {
            font-size: 1.2rem;
            line-height: 1.6;
        }

        .two-column .column img {
            margin-top: 1rem;
            border-radius: 8px;
        }
        {% endif %}

        {% if slide.templateId == 'big-numbers' %}
        .big-numbers {
            padding: 80px;
            height: 100%;
            text-align: center;
        }

        .big-numbers h1 {
            font-size: 2.5rem;
            margin-bottom: 3rem;
        }

        .big-numbers .numbers-grid {
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            gap: 40px;
        }

        .big-numbers .number-item {
            flex: 1;
            text-align: center;
        }

        .big-numbers .number-value {
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .big-numbers .number-label {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .big-numbers .number-description {
            font-size: 1.1rem;
            line-height: 1.5;
        }
        {% endif %}

        {% if slide.templateId == 'timeline' %}
        .timeline {
            padding: 80px;
            height: 100%;
        }

        .timeline h1 {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 3rem;
        }

        .timeline .timeline-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .timeline .timeline-item {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .timeline .timeline-date {
            font-size: 1.5rem;
            font-weight: 600;
            min-width: 120px;
        }

        .timeline .timeline-content {
            font-size: 1.2rem;
            line-height: 1.6;
            flex: 1;
        }
        {% endif %}

        {% if slide.templateId == 'process-steps' %}
        .process-steps {
            padding: 80px;
            height: 100%;
        }

        .process-steps h1 {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 3rem;
        }

        .process-steps .steps-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .process-steps .step-item {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .process-steps .step-number {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #667eea;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 600;
            flex-shrink: 0;
        }

        .process-steps .step-description {
            font-size: 1.3rem;
            line-height: 1.6;
            flex: 1;
        }
        {% endif %}

        {% if slide.templateId == 'challenges-solutions' %}
        .challenges-solutions {
            padding: 80px;
            height: 100%;
        }

        .challenges-solutions h1 {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 3rem;
        }

        .challenges-solutions .comparison {
            display: flex;
            gap: 60px;
            height: calc(100% - 200px);
        }

        .challenges-solutions .column {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .challenges-solutions .column h2 {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .challenges-solutions .column ul {
            list-style: none;
            margin-left: 0;
        }

        .challenges-solutions .column li {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            padding-left: 2rem;
            position: relative;
        }

        .challenges-solutions .column li:before {
            content: "â€¢";
            position: absolute;
            left: 0;
            font-size: 1.5rem;
        }
        {% endif %}

        {% if slide.templateId == 'four-box-grid' %}
        .four-box-grid {
            padding: 80px;
            height: 100%;
        }

        .four-box-grid h1 {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .four-box-grid .subtitle {
            font-size: 1.3rem;
            text-align: center;
            margin-bottom: 3rem;
            opacity: 0.8;
        }

        .four-box-grid .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            height: calc(100% - 250px);
        }

        .four-box-grid .box {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 30px;
            display: flex;
            flex-direction: column;
        }

        .four-box-grid .box h3 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .four-box-grid .box p {
            font-size: 1.1rem;
            line-height: 1.6;
            flex: 1;
        }
        {% endif %}

        {% if slide.templateId == 'pyramid' %}
        .pyramid {
            padding: 80px;
            height: 100%;
            text-align: center;
        }

        .pyramid h1 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
        }

        .pyramid .subtitle {
            font-size: 1.3rem;
            margin-bottom: 3rem;
            opacity: 0.8;
        }

        .pyramid .pyramid-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }

        .pyramid .pyramid-level {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 20px 40px;
            font-size: 1.2rem;
            line-height: 1.5;
        }

        .pyramid .pyramid-level.level-1 {
            width: 80%;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .pyramid .pyramid-level.level-2 {
            width: 60%;
        }

        .pyramid .pyramid-level.level-3 {
            width: 40%;
        }
        {% endif %}

        /* Responsive adjustments for PDF */
        @media print {
            .slide-page {
                page-break-after: always;
            }
        }

        /* Ensure images are properly sized and positioned */
        .image-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border: 2px dashed #cbd5e0;
            border-radius: 8px;
            color: #718096;
            font-size: 1.1rem;
            text-align: center;
            padding: 40px;
        }

        /* Handle positioning for draggable elements */
        .positioned-element {
            position: absolute;
        }

        /* Ensure text elements are properly styled */
        .text-element {
            word-wrap: break-word;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="slide-page">
        <div class="slide-content">
            {% if slide.templateId == 'title-slide' %}
            <div class="title-slide">
                <h1>{{ slide.props.title or 'Click to add title' }}</h1>
                {% if slide.props.subtitle %}
                <div class="subtitle">{{ slide.props.subtitle }}</div>
                {% endif %}
                {% if slide.props.author %}
                <div class="author">{{ slide.props.author }}</div>
                {% endif %}
                {% if slide.props.date %}
                <div class="date">{{ slide.props.date }}</div>
                {% endif %}
            </div>
            {% elif slide.templateId == 'content-slide' %}
            <div class="content-slide">
                <h1>{{ slide.props.title or 'Click to add title' }}</h1>
                <div class="content">{{ slide.props.content or 'Click to add content' }}</div>
            </div>
            {% elif slide.templateId == 'bullet-points' %}
            <div class="bullet-points">
                <h1>{{ slide.props.title or 'Click to add title' }}</h1>
                {% if slide.props.bullets %}
                <ul>
                    {% for bullet in slide.props.bullets %}
                    <li>{{ bullet }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>
            {% elif slide.templateId == 'bullet-points-right' %}
            <div class="bullet-points">
                <h1>{{ slide.props.title or 'Click to add title' }}</h1>
                {% if slide.props.subtitle %}
                <div class="subtitle">{{ slide.props.subtitle }}</div>
                {% endif %}
                {% if slide.props.bullets %}
                <ul>
                    {% for bullet in slide.props.bullets %}
                    <li>{{ bullet }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>
            {% elif slide.templateId == 'big-image-left' %}
            <div class="big-image-left">
                <div class="image-container">
                    {% if slide.props.imagePath %}
                    <img src="{{ slide.props.imagePath }}" alt="{{ slide.props.imageAlt or 'Slide image' }}" />
                    {% else %}
                    <div class="image-placeholder">
                        <div>
                            <div style="font-size: 2rem; margin-bottom: 1rem;">ðŸ“·</div>
                            <div>Click to upload image</div>
                        </div>
                    </div>
                    {% endif %}
                </div>
                <div class="content-container">
                    <h1>{{ slide.props.title or 'Click to add title' }}</h1>
                    <div class="subtitle">{{ slide.props.subtitle or 'Click to add content' }}</div>
                </div>
            </div>
            {% elif slide.templateId == 'two-column' %}
            <div class="two-column">
                <h1>{{ slide.props.title or 'Click to add title' }}</h1>
                <div class="columns">
                    <div class="column">
                        <h2>{{ slide.props.leftTitle or 'Left Column' }}</h2>
                        <p>{{ slide.props.leftContent or 'Left column content' }}</p>
                        {% if slide.props.leftImagePath %}
                        <img src="{{ slide.props.leftImagePath }}" alt="Left column image" />
                        {% endif %}
                    </div>
                    <div class="column">
                        <h2>{{ slide.props.rightTitle or 'Right Column' }}</h2>
                        <p>{{ slide.props.rightContent or 'Right column content' }}</p>
                        {% if slide.props.rightImagePath %}
                        <img src="{{ slide.props.rightImagePath }}" alt="Right column image" />
                        {% endif %}
                    </div>
                </div>
            </div>
            {% elif slide.templateId == 'big-numbers' %}
            <div class="big-numbers">
                <h1>{{ slide.props.title or 'Click to add title' }}</h1>
                {% if slide.props.numbers %}
                <div class="numbers-grid">
                    {% for number in slide.props.numbers %}
                    <div class="number-item">
                        <div class="number-value">{{ number.value }}</div>
                        <div class="number-label">{{ number.label }}</div>
                        <div class="number-description">{{ number.description }}</div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            {% elif slide.templateId == 'timeline' %}
            <div class="timeline">
                <h1>{{ slide.props.title or 'Click to add title' }}</h1>
                {% if slide.props.events %}
                <div class="timeline-container">
                    {% for event in slide.props.events %}
                    <div class="timeline-item">
                        <div class="timeline-date">{{ event.date }}</div>
                        <div class="timeline-content">{{ event.content }}</div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            {% elif slide.templateId == 'process-steps' %}
            <div class="process-steps">
                <h1>{{ slide.props.title or 'Click to add title' }}</h1>
                {% if slide.props.steps %}
                <div class="steps-container">
                    {% for step in slide.props.steps %}
                    <div class="step-item">
                        <div class="step-number">{{ loop.index }}</div>
                        <div class="step-description">{{ step.description }}</div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            {% elif slide.templateId == 'challenges-solutions' %}
            <div class="challenges-solutions">
                <h1>{{ slide.props.title or 'Click to add title' }}</h1>
                <div class="comparison">
                    <div class="column">
                        <h2>{{ slide.props.challengesTitle or 'Challenges' }}</h2>
                        {% if slide.props.challenges %}
                        <ul>
                            {% for challenge in slide.props.challenges %}
                            <li>{{ challenge }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                    <div class="column">
                        <h2>{{ slide.props.solutionsTitle or 'Solutions' }}</h2>
                        {% if slide.props.solutions %}
                        <ul>
                            {% for solution in slide.props.solutions %}
                            <li>{{ solution }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% elif slide.templateId == 'four-box-grid' %}
            <div class="four-box-grid">
                <h1>{{ slide.props.title or 'Click to add title' }}</h1>
                {% if slide.props.subtitle %}
                <div class="subtitle">{{ slide.props.subtitle }}</div>
                {% endif %}
                {% if slide.props.boxes %}
                <div class="grid">
                    {% for box in slide.props.boxes %}
                    <div class="box">
                        <h3>{{ box.title }}</h3>
                        <p>{{ box.content }}</p>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            {% elif slide.templateId == 'pyramid' %}
            <div class="pyramid">
                <h1>{{ slide.props.title or 'Click to add title' }}</h1>
                {% if slide.props.subtitle %}
                <div class="subtitle">{{ slide.props.subtitle }}</div>
                {% endif %}
                {% if slide.props.levels %}
                <div class="pyramid-content">
                    {% for level in slide.props.levels %}
                    <div class="pyramid-level level-{{ loop.index }}">
                        {{ level.content }}
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            {% else %}
            <!-- Fallback for unknown templates -->
            <div style="padding: 80px; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <h1 style="font-size: 2.5rem; margin-bottom: 2rem;">{{ slide.props.title or 'Slide Title' }}</h1>
                <p style="font-size: 1.3rem; text-align: center;">Template: {{ slide.templateId }}</p>
                {% if slide.props.subtitle %}
                <p style="font-size: 1.1rem; margin-top: 1rem; opacity: 0.8;">{{ slide.props.subtitle }}</p>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </div>
</body>
</html>
