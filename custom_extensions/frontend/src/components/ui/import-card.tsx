import React from "react";
import Link from "next/link";
import { cn } from "@/lib/utils";

interface ImportCardProps {
  icon: React.ReactNode; // Changed to accept custom icon SVGs
  title: string;
  features: string[];
  href?: string;
  onClick?: (e: React.MouseEvent) => void;
  className?: string;
}

// Custom tick icon
const TickIcon: React.FC = () => (
  <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12.458 4.89355C12.535 4.94398 12.5562 5.04706 12.5059 5.12402L7.97266 12.0576C7.94602 12.0982 7.90302 12.1256 7.85449 12.1318C7.80635 12.138 7.75782 12.1225 7.72168 12.0898L4.78809 9.42285C4.72004 9.36099 4.71463 9.25562 4.77637 9.1875C4.83828 9.11939 4.94362 9.11486 5.01172 9.17676L7.36719 11.3174L7.80078 11.7119L8.12207 11.2207L12.2275 4.94141C12.278 4.86465 12.3811 4.84327 12.458 4.89355Z" fill="#71717A" stroke="#71717A"/>
  </svg>
);

// Custom icon components
export const UploadFileIcon: React.FC = () => (
  <svg width="60" height="61" viewBox="0 0 60 61" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M44.0625 9.875H15.9375C14.9667 9.875 14.1797 9.08797 14.1797 8.11719C14.1797 7.14641 14.9667 6.35938 15.9375 6.35938H44.0625C45.0333 6.35938 45.8203 7.14641 45.8203 8.11719C45.8203 9.08797 45.0333 9.875 44.0625 9.875ZM45.8203 16.3203C45.8203 15.3495 45.0333 14.5625 44.0625 14.5625H30C29.0292 14.5625 28.2422 15.3495 28.2422 16.3203C28.2422 17.2911 29.0292 18.0781 30 18.0781H44.0625C45.0333 18.0781 45.8203 17.2911 45.8203 16.3203ZM60 58.7422V25.9297C60 24.9589 59.213 24.1719 58.2422 24.1719H26.2533L22.0876 17.9234C21.7616 17.4344 21.2128 17.1406 20.625 17.1406H6.5625C5.59172 17.1406 4.80469 17.9277 4.80469 18.8984V24.1719H1.75781C0.787031 24.1719 0 24.9589 0 25.9297V58.7422C0 59.713 0.787031 60.5 1.75781 60.5H58.2422C59.213 60.5 60 59.713 60 58.7422Z" fill="#EFB4FB"/>
    <path d="M49.9219 0.5H10.0781C9.10734 0.5 8.32031 1.28703 8.32031 2.25781V17.1406H20.625C21.2127 17.1406 21.7616 17.4344 22.0876 17.9233L26.2533 24.1719H51.6797V2.25781C51.6797 1.28703 50.8927 0.5 49.9219 0.5ZM44.0625 18.0781H30C29.0292 18.0781 28.2422 17.2911 28.2422 16.3203C28.2422 15.3495 29.0292 14.5625 30 14.5625H44.0625C45.0333 14.5625 45.8203 15.3495 45.8203 16.3203C45.8203 17.2911 45.0333 18.0781 44.0625 18.0781ZM44.0625 9.875H15.9375C14.9667 9.875 14.1797 9.08797 14.1797 8.11719C14.1797 7.14641 14.9667 6.35938 15.9375 6.35938H44.0625C45.0333 6.35938 45.8203 7.14641 45.8203 8.11719C45.8203 9.08797 45.0333 9.875 44.0625 9.875ZM16.9922 54.6406H7.61719C6.64641 54.6406 5.85938 53.8536 5.85938 52.8828C5.85938 51.912 6.64641 51.125 7.61719 51.125H16.9922C17.963 51.125 18.75 51.912 18.75 52.8828C18.75 53.8536 17.963 54.6406 16.9922 54.6406ZM16.9922 47.6094H7.61719C6.64641 47.6094 5.85938 46.8223 5.85938 45.8516C5.85938 44.8808 6.64641 44.0938 7.61719 44.0938H16.9922C17.963 44.0938 18.75 44.8808 18.75 45.8516C18.75 46.8223 17.963 47.6094 16.9922 47.6094Z" fill="#D817FF"/>
    <rect x="14.0625" y="6.35938" width="32.9297" height="3.51562" rx="1.75781" fill="white"/>
    <rect x="27.1875" y="14.6797" width="19.8047" height="3.51562" rx="1.75781" fill="white"/>
    <rect x="5.85938" y="44.0938" width="13.3594" height="3.51562" rx="1.75781" fill="white"/>
    <rect x="5.85938" y="50.8906" width="13.3594" height="3.51562" rx="1.75781" fill="white"/>
  </svg>
);

export const KnowledgeBaseIcon: React.FC = () => (
  <svg width="60" height="61" viewBox="0 0 60 61" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M14.9922 37.5C8.78857 37.5 3.74219 32.4536 3.74219 26.25C3.74219 20.0464 8.78857 15 14.9922 15C15.5552 15 16.1265 15.0449 16.6914 15.1328L18.5884 15.4276L18.8392 13.5242C19.5707 7.95227 24.3654 3.75 29.9922 3.75C35.619 3.75 40.4136 7.95227 41.1451 13.5242L41.396 15.4276L43.293 15.1328C43.8578 15.0449 44.4291 15 44.9922 15C51.1958 15 56.2422 20.0464 56.2422 26.25C56.2422 32.4536 51.1958 37.5 44.9922 37.5H14.9922Z" fill="#E3F2FD"/>
    <path d="M22.4922 56.25C20.424 56.25 18.7422 54.5682 18.7422 52.5C18.7422 50.4318 20.424 48.75 22.4922 48.75H39.3672V56.25H22.4922Z" fill="#E3F2FD"/>
    <path d="M18.7422 30C18.7422 27.9318 20.424 26.25 22.4922 26.25H41.2422V48.75H22.4922C20.424 48.75 18.7422 50.4318 18.7422 52.5V30Z" fill="#0F58F9" fill-opacity="0.7"/>
    <path d="M44.9922 13.125C44.3275 13.125 43.6638 13.1772 43.0046 13.2797C42.1605 6.85272 36.6472 1.875 29.9922 1.875C23.3372 1.875 17.8239 6.85272 16.9798 13.2797C16.3206 13.1772 15.6569 13.125 14.9922 13.125C7.75494 13.125 1.86719 19.0128 1.86719 26.25C1.86719 33.4872 7.75494 39.375 14.9922 39.375H16.8672V52.5C16.8672 55.6018 19.3904 58.125 22.4922 58.125H43.1172V54.375H41.2422V50.625H43.1172V39.375H44.9922C52.2294 39.375 58.1172 33.4872 58.1172 26.25C58.1172 19.0128 52.2294 13.125 44.9922 13.125ZM37.4922 54.375H22.4922C21.4586 54.375 20.6172 53.5336 20.6172 52.5C20.6172 51.4664 21.4586 50.625 22.4922 50.625H37.4922V54.375ZM39.3672 46.875H22.4922C21.8348 46.875 21.204 46.9885 20.6172 47.1964V30C20.6172 28.9664 21.4586 28.125 22.4922 28.125H39.3672V46.875ZM44.9922 35.625H43.1172V24.375H22.4922C19.3904 24.375 16.8672 26.8982 16.8672 30V35.625H14.9922C9.82312 35.625 5.61719 31.4191 5.61719 26.25C5.61719 21.0809 9.82312 16.875 14.9922 16.875C16.0515 16.875 17.1116 17.0627 18.1443 17.4316L20.8333 18.2373L20.6355 15.3772C20.6273 15.2518 20.6172 15.1273 20.6172 15C20.6172 9.83093 24.8231 5.625 29.9922 5.625C35.1613 5.625 39.3672 9.83093 39.3672 15C39.3672 15.1273 39.3571 15.2518 39.337 15.5502L39.1612 18.3902L41.84 17.4316C42.8727 17.0627 43.9329 16.875 44.9922 16.875C50.1613 16.875 54.3672 21.0809 54.3672 26.25C54.3672 31.4191 50.1613 35.625 44.9922 35.625ZM35.6172 35.625H24.3672V31.875H35.6172V35.625Z" fill="#0F58F9"/>
  </svg>
);

export const ImportURLIcon: React.FC = () => (
  <svg width="60" height="47" viewBox="0 0 60 47" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M58.2422 0.648438H1.75781C0.77332 0.648438 0 1.42176 0 2.40625V11.1953L3.51562 14.7109H56.4844L60 11.1953V2.40625C60 1.42176 59.2267 0.648438 58.2422 0.648438Z" fill="#C1FDF7"/>
    <path d="M8.90625 7.67969C9.87703 7.67969 10.6641 6.89266 10.6641 5.92188C10.6641 4.95109 9.87703 4.16406 8.90625 4.16406C7.93547 4.16406 7.14844 4.95109 7.14844 5.92188C7.14844 6.89266 7.93547 7.67969 8.90625 7.67969ZM15.9375 7.67969C16.9083 7.67969 17.6953 6.89266 17.6953 5.92188C17.6953 4.95109 16.9083 4.16406 15.9375 4.16406C14.9667 4.16406 14.1797 4.95109 14.1797 5.92188C14.1797 6.89266 14.9667 7.67969 15.9375 7.67969ZM22.9688 7.67969C23.9395 7.67969 24.7266 6.89266 24.7266 5.92188C24.7266 4.95109 23.9395 4.16406 22.9688 4.16406C21.998 4.16406 21.2109 4.95109 21.2109 5.92188C21.2109 6.89266 21.998 7.67969 22.9688 7.67969ZM0 11.1953V44.5938C0 45.5782 0.77332 46.3516 1.75781 46.3516H11.4025C11.0727 45.1974 10.8947 44.0215 10.7859 42.8359H14.3354C14.4749 44.0324 14.7039 45.2184 15.1289 46.3516H21.5273C21.3868 45.2266 21.3634 44.0236 21.3164 42.8359H24.7814C24.8305 44.0324 24.9128 45.2184 25.078 46.3516H34.9219C35.0871 45.2184 35.1693 44.0324 35.2185 42.8359H38.6835C38.6365 44.0236 38.613 45.2266 38.4725 46.3516H44.9061C45.3093 45.2366 45.5323 44.0466 45.6688 42.8359H49.2154C49.1072 44.0358 48.9288 45.2155 48.5975 46.3516H58.2422C59.2267 46.3516 60 45.5782 60 44.5938V11.1953H0Z" fill="#4CFFF0"/>
    <path d="M47.7539 33.4141C47.7188 33.3789 47.7188 33.3436 47.7188 33.3085C47.6838 33.2383 47.6134 33.168 47.5782 33.0624C44.5195 26.3828 37.8046 21.7422 30 21.7422C22.1954 21.7422 15.4805 26.3828 12.4219 33.0624C12.3867 33.168 12.3163 33.2383 12.2814 33.3085C12.2814 33.3436 12.2814 33.3789 12.2462 33.4141C11.2264 35.7343 10.6641 38.371 10.6641 41.0781C10.6641 42.8711 10.9102 44.6289 11.4025 46.3516H15.129C14.4962 44.6642 14.1797 42.8711 14.1797 41.0781C14.1797 39.2147 14.4962 37.4569 15.0938 35.8047H21.5273C21.3164 37.5273 21.2108 39.3203 21.2108 41.0781C21.2108 42.8711 21.3164 44.6642 21.5273 46.3516H25.078C24.8321 44.6642 24.7266 42.8711 24.7266 41.0781C24.7266 39.1798 24.8321 37.422 25.078 35.8047H34.9219C35.1677 37.422 35.2733 39.1798 35.2733 41.0781C35.2733 42.8711 35.1677 44.6642 34.9219 46.3516H38.4725C38.6835 44.6642 38.7891 42.8711 38.7891 41.0781C38.7891 39.3203 38.6835 37.5273 38.4725 35.8047H44.9061C45.5038 37.4569 45.8202 39.2147 45.8202 41.0781C45.8202 42.9064 45.5037 44.6993 44.9061 46.3516H48.5975C49.0898 44.6642 49.3359 42.9064 49.3359 41.0781C49.3359 38.371 48.7736 35.7343 47.7539 33.4141ZM22.125 32.2891H16.8516C18.6445 29.6523 21.1757 27.578 24.1641 26.3828C23.2853 28.035 22.6173 30.0742 22.125 32.2891ZM25.7111 32.2891C26.8009 27.8241 28.5936 25.2578 30 25.2578C31.4064 25.2578 33.1991 27.8241 34.2889 32.2891H25.7111ZM37.875 32.2891C37.3828 30.0742 36.7148 28.035 35.8359 26.3828C38.8243 27.578 41.3555 29.6523 43.1484 32.2891H37.875Z" fill="white"/>
    <circle cx="9" cy="5.64844" r="2" fill="white"/>
    <circle cx="16" cy="5.64844" r="2" fill="white"/>
    <circle cx="23" cy="5.64844" r="2" fill="white"/>
  </svg>
);

const ImportCard = React.forwardRef<HTMLDivElement, ImportCardProps>(
  ({ icon, title, features, href, onClick, className }, ref) => {
    const cardContent = (
      <div
        ref={ref}
        className={cn(
          "group rounded-lg relative overflow-hidden transition-all duration-200 h-full w-[400px]",
          "bg-white border-2 border-[#CCCCCC] shadow-md",
          "hover:bg-[#F2F8FF] hover:border-[#0F58F9] hover:shadow-xl",
          "active:bg-[#F2F8FF] active:border-[#0F58F9] active:shadow-xl",
          "cursor-pointer hover:[transform:scale(1.05)] active:[transform:scale(1.05)]",
          className
        )}
      >
        <div className="relative p-6 h-full flex flex-col items-center">
          {/* Icon section with opacity states */}
          <div className="flex items-center justify-center h-16 relative mb-6 opacity-50 group-hover:opacity-100 group-active:opacity-100 transition-opacity duration-200">
            {icon}
          </div>
          
          {/* Title */}
          <h3 
            className="text-2xl font-semibold text-center leading-tight tracking-[0.01em] transition-all duration-200 mb-4 group-hover:!text-[#0F58F9] group-active:!text-[#0F58F9]"
            style={{ color: '#4D4D4D' }}
          >
            {title}
          </h3>
          
          {/* Features list */}
          <div className="flex flex-row flex-wrap justify-center gap-x-4 gap-y-2">
            {features.map((feature, index) => (
              <div key={index} className="flex items-center gap-2 text-xs whitespace-nowrap" style={{ color: '#878787' }}>
                <TickIcon />
                <span>{feature}</span>
              </div>
            ))}
          </div>
        </div>
      </div>
    );

    if (href) {
      return (
        <Link href={href} onClick={onClick}>
          {cardContent}
        </Link>
      );
    }

    return (
      <div onClick={onClick}>
        {cardContent}
      </div>
    );
  }
);

ImportCard.displayName = "ImportCard";

export { ImportCard };

