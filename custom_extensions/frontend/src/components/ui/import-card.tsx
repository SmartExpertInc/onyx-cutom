import React from "react";
import Link from "next/link";
import { cn } from "@/lib/utils";

interface ImportCardProps {
  icon: React.ReactNode; // Changed to accept custom icon SVGs
  title: string;
  features: string[];
  href?: string;
  onClick?: (e: React.MouseEvent) => void;
  className?: string;
}

// Custom tick icon
const TickIcon: React.FC = () => (
  <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12.458 4.89355C12.535 4.94398 12.5562 5.04706 12.5059 5.12402L7.97266 12.0576C7.94602 12.0982 7.90302 12.1256 7.85449 12.1318C7.80635 12.138 7.75782 12.1225 7.72168 12.0898L4.78809 9.42285C4.72004 9.36099 4.71463 9.25562 4.77637 9.1875C4.83828 9.11939 4.94362 9.11486 5.01172 9.17676L7.36719 11.3174L7.80078 11.7119L8.12207 11.2207L12.2275 4.94141C12.278 4.86465 12.3811 4.84327 12.458 4.89355Z" fill="#71717A" stroke="#71717A"/>
  </svg>
);

// Custom icon components
export const UploadFileIcon: React.FC = () => (
  <svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M44.0625 9.375H15.9375C14.9667 9.375 14.1797 8.58797 14.1797 7.61719C14.1797 6.64641 14.9667 5.85938 15.9375 5.85938H44.0625C45.0333 5.85938 45.8203 6.64641 45.8203 7.61719C45.8203 8.58797 45.0333 9.375 44.0625 9.375ZM45.8203 15.8203C45.8203 14.8495 45.0333 14.0625 44.0625 14.0625H30C29.0292 14.0625 28.2422 14.8495 28.2422 15.8203C28.2422 16.7911 29.0292 17.5781 30 17.5781H44.0625C45.0333 17.5781 45.8203 16.7911 45.8203 15.8203ZM60 58.2422V25.4297C60 24.4589 59.213 23.6719 58.2422 23.6719H26.2533L22.0876 17.4234C21.7616 16.9344 21.2128 16.6406 20.625 16.6406H6.5625C5.59172 16.6406 4.80469 17.4277 4.80469 18.3984V23.6719H1.75781C0.787031 23.6719 0 24.4589 0 25.4297V58.2422C0 59.213 0.787031 60 1.75781 60H58.2422C59.213 60 60 59.213 60 58.2422Z" fill="#F2CCFA"/>
    <path d="M49.9219 0H10.0781C9.10734 0 8.32031 0.787031 8.32031 1.75781V16.6406H20.625C21.2127 16.6406 21.7616 16.9344 22.0876 17.4233L26.2533 23.6719H51.6797V1.75781C51.6797 0.787031 50.8927 0 49.9219 0ZM44.0625 17.5781H30C29.0292 17.5781 28.2422 16.7911 28.2422 15.8203C28.2422 14.8495 29.0292 14.0625 30 14.0625H44.0625C45.0333 14.0625 45.8203 14.8495 45.8203 15.8203C45.8203 16.7911 45.0333 17.5781 44.0625 17.5781ZM44.0625 9.375H15.9375C14.9667 9.375 14.1797 8.58797 14.1797 7.61719C14.1797 6.64641 14.9667 5.85938 15.9375 5.85938H44.0625C45.0333 5.85938 45.8203 6.64641 45.8203 7.61719C45.8203 8.58797 45.0333 9.375 44.0625 9.375ZM16.9922 54.1406H7.61719C6.64641 54.1406 5.85938 53.3536 5.85938 52.3828C5.85938 51.412 6.64641 50.625 7.61719 50.625H16.9922C17.963 50.625 18.75 51.412 18.75 52.3828C18.75 53.3536 17.963 54.1406 16.9922 54.1406ZM16.9922 47.1094H7.61719C6.64641 47.1094 5.85938 46.3223 5.85938 45.3516C5.85938 44.3808 6.64641 43.5938 7.61719 43.5938H16.9922C17.963 43.5938 18.75 44.3808 18.75 45.3516C18.75 46.3223 17.963 47.1094 16.9922 47.1094Z" fill="#E16DF8"/>
    <rect x="14.0625" y="5.85938" width="32.9297" height="3.51562" rx="1.75781" fill="white"/>
    <rect x="27.1875" y="14.1797" width="19.8047" height="3.51562" rx="1.75781" fill="white"/>
    <rect x="5.85938" y="43.5938" width="13.3594" height="3.51562" rx="1.75781" fill="white"/>
    <rect x="5.85938" y="50.3906" width="13.3594" height="3.51562" rx="1.75781" fill="white"/>
  </svg>
);

export const KnowledgeBaseIcon: React.FC = () => (
  <svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M15 37C8.79639 37 3.75 31.9536 3.75 25.75C3.75 19.5464 8.79639 14.5 15 14.5C15.563 14.5 16.1343 14.5449 16.6992 14.6328L18.5962 14.9276L18.847 13.0242C19.5786 7.45227 24.3732 3.25 30 3.25C35.6268 3.25 40.4214 7.45227 41.153 13.0242L41.4038 14.9276L43.3008 14.6328C43.8657 14.5449 44.437 14.5 45 14.5C51.2036 14.5 56.25 19.5464 56.25 25.75C56.25 31.9536 51.2036 37 45 37H15Z" fill="#E3F2FD"/>
    <path d="M22.5 55.75C20.4318 55.75 18.75 54.0682 18.75 52C18.75 49.9318 20.4318 48.25 22.5 48.25H39.375V55.75H22.5Z" fill="#E3F2FD"/>
    <path d="M18.75 29.5C18.75 27.4318 20.4318 25.75 22.5 25.75H41.25V48.25H22.5C20.4318 48.25 18.75 49.9318 18.75 52V29.5Z" fill="#CCDBFC"/>
    <path d="M45 12.625C44.3353 12.625 43.6716 12.6772 43.0124 12.7797C42.1683 6.35272 36.655 1.375 30 1.375C23.345 1.375 17.8317 6.35272 16.9876 12.7797C16.3284 12.6772 15.6647 12.625 15 12.625C7.76276 12.625 1.875 18.5128 1.875 25.75C1.875 32.9872 7.76276 38.875 15 38.875H16.875V52C16.875 55.1018 19.3982 57.625 22.5 57.625H43.125V53.875H41.25V50.125H43.125V38.875H45C52.2372 38.875 58.125 32.9872 58.125 25.75C58.125 18.5128 52.2372 12.625 45 12.625ZM37.5 53.875H22.5C21.4664 53.875 20.625 53.0336 20.625 52C20.625 50.9664 21.4664 50.125 22.5 50.125H37.5V53.875ZM39.375 46.375H22.5C21.8427 46.375 21.2119 46.4885 20.625 46.6964V29.5C20.625 28.4664 21.4664 27.625 22.5 27.625H39.375V46.375ZM45 35.125H43.125V23.875H22.5C19.3982 23.875 16.875 26.3982 16.875 29.5V35.125H15C9.83093 35.125 5.625 30.9191 5.625 25.75C5.625 20.5809 9.83093 16.375 15 16.375C16.0593 16.375 17.1194 16.5627 18.1522 16.9316L20.8411 17.7373L20.6433 14.8772C20.6351 14.7518 20.625 14.6273 20.625 14.5C20.625 9.33093 24.8309 5.125 30 5.125C35.1691 5.125 39.375 9.33093 39.375 14.5C39.375 14.6273 39.3649 14.7518 39.3448 15.0502L39.169 17.8902L41.8478 16.9316C42.8806 16.5627 43.9407 16.375 45 16.375C50.1691 16.375 54.375 20.5809 54.375 25.75C54.375 30.9191 50.1691 35.125 45 35.125ZM35.625 35.125H24.375V31.375H35.625V35.125Z" fill="#0F58F9"/>
  </svg>
);

export const ImportURLIcon: React.FC = () => (
  <svg width="60" height="46" viewBox="0 0 60 46" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M58.2422 0H1.75781C0.77332 0 0 0.77332 0 1.75781V10.5469L3.51562 14.0625H56.4844L60 10.5469V1.75781C60 0.77332 59.2267 0 58.2422 0Z" fill="#CAFCF7"/>
    <path d="M8.90625 7.03125C9.87703 7.03125 10.6641 6.24422 10.6641 5.27344C10.6641 4.30266 9.87703 3.51562 8.90625 3.51562C7.93547 3.51562 7.14844 4.30266 7.14844 5.27344C7.14844 6.24422 7.93547 7.03125 8.90625 7.03125ZM15.9375 7.03125C16.9083 7.03125 17.6953 6.24422 17.6953 5.27344C17.6953 4.30266 16.9083 3.51562 15.9375 3.51562C14.9667 3.51562 14.1797 4.30266 14.1797 5.27344C14.1797 6.24422 14.9667 7.03125 15.9375 7.03125ZM22.9688 7.03125C23.9395 7.03125 24.7266 6.24422 24.7266 5.27344C24.7266 4.30266 23.9395 3.51562 22.9688 3.51562C21.998 3.51562 21.2109 4.30266 21.2109 5.27344C21.2109 6.24422 21.998 7.03125 22.9688 7.03125ZM0 10.5469V43.9453C0 44.9298 0.77332 45.7031 1.75781 45.7031H11.4025C11.0727 44.5489 10.8947 43.3731 10.7859 42.1875H14.3354C14.4749 43.384 14.7039 44.5699 15.1289 45.7031H21.5273C21.3868 44.5781 21.3634 43.3752 21.3164 42.1875H24.7814C24.8305 43.384 24.9128 44.5699 25.078 45.7031H34.9219C35.0871 44.5699 35.1693 43.384 35.2185 42.1875H38.6835C38.6365 43.3752 38.613 44.5781 38.4725 45.7031H44.9061C45.3093 44.5882 45.5323 43.3982 45.6688 42.1875H49.2154C49.1072 43.3874 48.9288 44.5671 48.5975 45.7031H58.2422C59.2267 45.7031 60 44.9298 60 43.9453V10.5469H0Z" fill="#6CF9ED"/>
    <path d="M47.7539 32.7656C47.7188 32.7305 47.7188 32.6952 47.7188 32.66C47.6838 32.5898 47.6134 32.5195 47.5782 32.4139C44.5195 25.7344 37.8046 21.0938 30 21.0938C22.1954 21.0938 15.4805 25.7344 12.4219 32.4139C12.3867 32.5195 12.3163 32.5898 12.2814 32.66C12.2814 32.6952 12.2814 32.7305 12.2462 32.7656C11.2264 35.0858 10.6641 37.7225 10.6641 40.4297C10.6641 42.2227 10.9102 43.9805 11.4025 45.7031H15.129C14.4962 44.0157 14.1797 42.2227 14.1797 40.4297C14.1797 38.5663 14.4962 36.8085 15.0938 35.1562H21.5273C21.3164 36.8789 21.2108 38.6719 21.2108 40.4297C21.2108 42.2227 21.3164 44.0157 21.5273 45.7031H25.078C24.8321 44.0157 24.7266 42.2227 24.7266 40.4297C24.7266 38.5314 24.8321 36.7736 25.078 35.1562H34.9219C35.1677 36.7736 35.2733 38.5314 35.2733 40.4297C35.2733 42.2227 35.1677 44.0157 34.9219 45.7031H38.4725C38.6835 44.0157 38.7891 42.2227 38.7891 40.4297C38.7891 38.6719 38.6835 36.8789 38.4725 35.1562H44.9061C45.5038 36.8085 45.8202 38.5663 45.8202 40.4297C45.8202 42.2579 45.5037 44.0509 44.9061 45.7031H48.5975C49.0898 44.0157 49.3359 42.2579 49.3359 40.4297C49.3359 37.7225 48.7736 35.0858 47.7539 32.7656ZM22.125 31.6406H16.8516C18.6445 29.0039 21.1757 26.9296 24.1641 25.7344C23.2853 27.3866 22.6173 29.4258 22.125 31.6406ZM25.7111 31.6406C26.8009 27.1757 28.5936 24.6094 30 24.6094C31.4064 24.6094 33.1991 27.1757 34.2889 31.6406H25.7111ZM37.875 31.6406C37.3828 29.4258 36.7148 27.3866 35.8359 25.7344C38.8243 26.9296 41.3555 29.0039 43.1484 31.6406H37.875Z" fill="white"/>
    <circle cx="9" cy="5" r="2" fill="white"/>
    <circle cx="16" cy="5" r="2" fill="white"/>
    <circle cx="23" cy="5" r="2" fill="white"/>
  </svg>
);

const ImportCard = React.forwardRef<HTMLDivElement, ImportCardProps>(
  ({ icon, title, features, href, onClick, className }, ref) => {
    const cardContent = (
      <div
        ref={ref}
        className={cn(
          "group rounded-lg relative overflow-hidden transition-all duration-200 h-full w-[400px]",
          "bg-white border-2 border-[#CCCCCC] shadow-md",
          "hover:bg-[#F2F8FF] hover:border-[#0F58F9] hover:shadow-xl",
          "active:bg-[#F2F8FF] active:border-[#0F58F9] active:shadow-xl",
          "cursor-pointer hover:[transform:scale(1.05)] active:[transform:scale(1.05)]",
          className
        )}
      >
        <div className="relative p-6 h-full flex flex-col items-center">
          {/* Icon section with opacity states */}
          <div className="flex items-center justify-center h-16 relative mb-6 opacity-50 group-hover:opacity-100 group-active:opacity-100 transition-opacity duration-200">
            {icon}
          </div>
          
          {/* Title */}
          <h3 
            className="text-2xl font-semibold text-center leading-tight tracking-[0.01em] transition-all duration-200 mb-4 group-hover:!text-[#0F58F9] group-active:!text-[#0F58F9]"
            style={{ color: '#4D4D4D' }}
          >
            {title}
          </h3>
          
          {/* Features list */}
          <div className="flex flex-row flex-wrap justify-center gap-x-4 gap-y-2">
            {features.map((feature, index) => (
              <div key={index} className="flex items-center gap-2 text-xs whitespace-nowrap" style={{ color: '#878787' }}>
                <TickIcon />
                <span>{feature}</span>
              </div>
            ))}
          </div>
        </div>
      </div>
    );

    if (href) {
      return (
        <Link href={href} onClick={onClick}>
          {cardContent}
        </Link>
      );
    }

    return (
      <div onClick={onClick}>
        {cardContent}
      </div>
    );
  }
);

ImportCard.displayName = "ImportCard";

export { ImportCard };

