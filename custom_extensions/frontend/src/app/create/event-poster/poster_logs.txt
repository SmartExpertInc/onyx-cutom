backend:
custom_backend-1  | INFO:app.services.pdf_generator:PDF Template Directory expected at: /app/app/templates
custom_backend-1  | INFO:     Started server process [1]
custom_backend-1  | INFO:     Waiting for application startup.
custom_backend-1  | INFO:main:Custom Backend starting...
custom_backend-1  | INFO:main:'projects' table ensured and updated.
custom_backend-1  | INFO:main:'microproduct_pipelines' table ensured.
custom_backend-1  | INFO:main:'projects' table ensured and updated with 'source_chat_session_id'.
custom_backend-1  | INFO:main:'design_templates' table ensured.
custom_backend-1  | INFO:main:'trashed_projects' table ensured (soft-delete).
custom_backend-1  | INFO:main:'user_credits' table ensured.
custom_backend-1  | INFO:main:Updated credit_transactions table to support admin_removal type
custom_backend-1  | INFO:main:'credit_transactions' table ensured.
custom_backend-1  | INFO:main:Attempting to connect to Onyx database: postgresql://postgres:ookBossyauptyetPaxTy@relational_db:5432/onyx_db
custom_backend-1  | INFO:main:Trying to connect to: postgresql://postgres:ookBossyauptyetPaxTy@relational_db:5432/onyx_db
custom_backend-1  | WARNING:main:Failed to connect to postgresql://postgres:ookBossyauptyetPaxTy@relational_db:5432/onyx_db: database "onyx_db" does not exist
custom_backend-1  | INFO:main:Trying to connect to: postgresql://postgres:ookBossyauptyetPaxTy@relational_db:5432/postgres
custom_backend-1  | INFO:main:Found 3 Onyx users to migrate
custom_backend-1  | INFO:main:Populated user_credits table with 3 existing Onyx users (100 credits each).
custom_backend-1  | INFO:main:Added quality_tier column to project_folders table
custom_backend-1  | INFO:main:Updated existing folders with default 'medium' tier
custom_backend-1  | INFO:main:Created index for quality_tier column
custom_backend-1  | INFO:main:Added custom_rate column to project_folders table
custom_backend-1  | INFO:main:Updated existing folders with default custom_rate
custom_backend-1  | INFO:main:Created index for custom_rate column
custom_backend-1  | INFO:main:Added custom_rate and quality_tier columns to projects table
custom_backend-1  | INFO:main:Created indexes for project-level custom_rate and quality_tier columns
custom_backend-1  | INFO:main:Added custom_rate and quality_tier columns to trashed_projects table
custom_backend-1  | INFO:main:Applying critical fix: Ensuring order and completion_time columns are TEXT type
custom_backend-1  | INFO:main:Successfully set projects.order and projects.completion_time to TEXT type
custom_backend-1  | INFO:main:Successfully set trashed_projects.order and trashed_projects.completion_time to TEXT type
custom_backend-1  | INFO:main:Successfully set default values for empty order and completion_time fields
custom_backend-1  | INFO:main:Projects table schema verification:
custom_backend-1  | INFO:main:  completion_time: text (nullable: YES)
custom_backend-1  | INFO:main:  folder_id: integer (nullable: YES)
custom_backend-1  | INFO:main:  order: text (nullable: YES)
custom_backend-1  | INFO:main:  source_chat_session_id: uuid (nullable: YES)
custom_backend-1  | INFO:main:Trashed_projects table schema verification:
custom_backend-1  | INFO:main:  completion_time: text (nullable: YES)
custom_backend-1  | INFO:main:  folder_id: integer (nullable: YES)
custom_backend-1  | INFO:main:  order: text (nullable: YES)
custom_backend-1  | INFO:main:  source_chat_session_id: uuid (nullable: YES)
custom_backend-1  | INFO:main:'request_analytics' table ensured.
custom_backend-1  | INFO:main:AI parser tracking columns added to request_analytics table.
custom_backend-1  | INFO:main:Added is_standalone column to projects table.
custom_backend-1  | INFO:main:Added is_standalone column to trashed_projects table.
custom_backend-1  | INFO:main:Legacy support: is_standalone field defaults to NULL for existing products.
custom_backend-1  | INFO:main:Database schema migration completed successfully.
custom_backend-1  | INFO:     Application startup complete.
custom_backend-1  | INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:43846 - "GET /api/custom/projects/folders HTTP/1.1" 200 OK
custom_backend-1  | INFO:     172.18.0.12:43856 - "GET /api/custom/credits/me HTTP/1.1" 200 OK
custom_backend-1  | INFO:     172.18.0.12:43832 - "GET /api/custom/projects HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:43872 - "GET /api/custom/projects/folders HTTP/1.1" 200 OK
custom_backend-1  | INFO:     172.18.0.12:43876 - "GET /api/custom/projects HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:43878 - "GET /api/custom/projects/90/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:58066 - "GET /api/custom/projects/89/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:58078 - "GET /api/custom/projects/85/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:58084 - "GET /api/custom/projects/84/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:58090 - "GET /api/custom/projects/83/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:58106 - "GET /api/custom/projects/82/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] ========== BACKEND POSTER GENERATION STARTED ==========
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Timestamp: 2025-09-19T12:34:54.737418
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Request method: POST
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Request URL: http://dev4.contentbuilder.ai/api/custom/poster-image/generate
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Client host: 172.18.0.12
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] === PARSING REQUEST DATA ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] ‚úÖ Successfully parsed JSON request body
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] === REQUEST DATA ANALYSIS ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Total fields in request: 14
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - eventName: "–í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è" (type: str, length: 25)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - mainSpeaker: "–î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π" (type: str, length: 16)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - speakerDescription: "–∑–∞—Å–Ω–æ–≤–Ω–∏–∫ QNICORN NEST (Luxemburg), –ø–µ—Ä—à–æ–≥–æ —à—Ç—É—á–Ω–æ–≥–æ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É, —è–∫–∏–π –≤–∂–µ 8 —Ä–æ–∫—ñ–≤ —à—É–∫–∞—î —Ñ—ñ–Ω–∞–Ω—Å—É–≤–∞–Ω–Ω—è ..." (type: str, length: 147)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - date: "08.10.2025" (type: str, length: 10)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - topic: "–¢—Ä–µ–Ω–¥–∏ —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ —Ä–∏–Ω–∫—É VC —É 2025-2026 —Ä–æ–∫–∞—Ö" (type: str, length: 47)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - additionalSpeakers: "–¢–∞ —â–µ 4 –∑—ñ—Ä–∫–æ–≤–∏—Ö —Å–ø—ñ–∫–µ—Ä—ñ–≤: –°–µ—Ä–≥—ñ–π –†–∞–±–µ–Ω–∫–æ, –û–ª–µ–∫—Å–∞–Ω–¥—Ä –ë–æ—Ä–Ω—è–∫–æ–≤, –ê–Ω—Ç–æ–Ω –í–∞–π—Å–±—É—Ä–¥ —Ç–∞ –ê–Ω–¥—Ä—ñ–π –õ–∞–∑–æ—Ä–µ–Ω–∫–æ" (type: str, length: 97)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - ticketPrice: "150‚Ç¨" (type: str, length: 4)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - ticketType: "STANDART" (type: str, length: 8)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - freeAccessConditions: "–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –¥–ª—è —á–ª–µ–Ω—ñ–≤ business club" (type: str, length: 36)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - speakerImageSrc: [base64 data, length: 864114 chars]
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - format: "poster" (type: str, length: 6)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - dimensions: "{'width': 1000, 'height': 1000}" (type: dict, length: 31)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - sessionId: "poster-1758285293093-184g2pvkr" (type: str, length: 30)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - clientTimestamp: "2025-09-19T12:34:53.093Z" (type: str, length: 24)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Session ID: poster-1758285293093-184g2pvkr
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] === FIELD VALIDATION ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Required fields: ['eventName', 'mainSpeaker', 'date', 'topic']
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - eventName: ‚úÖ VALID (value: "–í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è")
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - mainSpeaker: ‚úÖ VALID (value: "–î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π")
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - date: ‚úÖ VALID (value: "08.10.2025")
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - topic: ‚úÖ VALID (value: "–¢—Ä–µ–Ω–¥–∏ —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ —Ä–∏–Ω–∫—É VC —É 2025-2026 —Ä–æ–∫–∞—Ö")
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] ‚úÖ All required fields validated successfully
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] === KEY POSTER DATA ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Event: –í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Speaker: –î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Date: 08.10.2025
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Topic: –¢—Ä–µ–Ω–¥–∏ —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ —Ä–∏–Ω–∫—É VC —É 2025-2026 —Ä–æ–∫–∞—Ö
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Format: poster
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Dimensions: {'width': 1000, 'height': 1000}
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] === FILE SYSTEM SETUP ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Filename components:
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - timestamp: 20250919_123454
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - poster_id: bd34dcc9
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - output_filename: poster_image_20250919_123454_bd34dcc9.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Creating output directory: /app/output/poster_images
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] ‚úÖ Output directory created/verified
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Full output path: output/poster_images/poster_image_20250919_123454_bd34dcc9.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Directory exists: True
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Directory is writable: True
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] === HTML GENERATION ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Attempting to import template service...
custom_backend-1  | INFO:app.services.poster_template_service:Poster Template Service initialized with Jinja2
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] ‚úÖ Template service imported successfully
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Calling template service to generate HTML...
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] ========== TEMPLATE SERVICE STARTED ==========
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Timestamp: 2025-09-19 12:34:54
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Input data analysis:
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - Total fields: 14
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - Data keys: ['eventName', 'mainSpeaker', 'speakerDescription', 'date', 'topic', 'additionalSpeakers', 'ticketPrice', 'ticketType', 'freeAccessConditions', 'speakerImageSrc', 'format', 'dimensions', 'sessionId', 'clientTimestamp']
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - eventName: "–í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - mainSpeaker: "–î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - speakerDescription: "–∑–∞—Å–Ω–æ–≤–Ω–∏–∫ QNICORN NEST (Luxemburg), –ø–µ—Ä—à–æ–≥–æ —à—Ç—É—á–Ω–æ..." (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - date: "08.10.2025" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - topic: "–¢—Ä–µ–Ω–¥–∏ —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ —Ä–∏–Ω–∫—É VC —É 2025-2026 —Ä–æ–∫–∞—Ö" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - additionalSpeakers: "–¢–∞ —â–µ 4 –∑—ñ—Ä–∫–æ–≤–∏—Ö —Å–ø—ñ–∫–µ—Ä—ñ–≤: –°–µ—Ä–≥—ñ–π –†–∞–±–µ–Ω–∫–æ, –û–ª–µ–∫—Å–∞–Ω..." (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - ticketPrice: "150‚Ç¨" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - ticketType: "STANDART" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - freeAccessConditions: "–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –¥–ª—è —á–ª–µ–Ω—ñ–≤ business club" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - speakerImageSrc: [base64 image data, 864114 chars]
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - format: "poster" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - dimensions: "{'width': 1000, 'height': 1000}" (type: dict)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - sessionId: "poster-1758285293093-184g2pvkr" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - clientTimestamp: "2025-09-19T12:34:53.093Z" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] === ENVIRONMENT CHECK ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] ‚úÖ Jinja2 environment is available
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Environment type: <class 'jinja2.environment.Environment'>
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] === TEMPLATE LOADING ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] ‚úÖ Template loaded successfully in 24.07ms
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Template name: event_poster_template.html
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Template object: <class 'jinja2.environment.Template'>
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] === CONTEXT PREPARATION ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Context data prepared in 0.00ms
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Context fields: 11
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - eventName: "–í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - mainSpeaker: "–î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - speakerDescription: "–∑–∞—Å–Ω–æ–≤–Ω–∏–∫ QNICORN NEST (Luxemburg), –ø–µ—Ä—à–æ–≥–æ —à—Ç—É—á–Ω–æ..."
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - date: "08.10.2025"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - topic: "–¢—Ä–µ–Ω–¥–∏ —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ —Ä–∏–Ω–∫—É VC —É 2025-2026 —Ä–æ–∫–∞—Ö"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - additionalSpeakers: "–¢–∞ —â–µ 4 –∑—ñ—Ä–∫–æ–≤–∏—Ö —Å–ø—ñ–∫–µ—Ä—ñ–≤: –°–µ—Ä–≥—ñ–π –†–∞–±–µ–Ω–∫–æ, –û–ª–µ–∫—Å–∞–Ω..."
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - ticketPrice: "150‚Ç¨"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - ticketType: "STANDART"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - freeAccessConditions: "–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –¥–ª—è —á–ª–µ–Ω—ñ–≤ business club"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - speakerImageSrc: [base64 data, 864114 chars]
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - theme: "event-poster"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] === DATE PARSING ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Original date: "08.10.2025"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Date parts: ['08', '10', '2025']
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Date parsing completed in 0.06ms
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Parsed date components:
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - dayMonth: "08.10"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - year: "2025"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] === FINAL CONTEXT SUMMARY ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Event: –í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Speaker: –î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Theme: event-poster
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Total context keys: 13
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] === TEMPLATE RENDERING ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Starting template render with 13 context variables...
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] ‚úÖ Template rendered successfully in 8.45ms
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] HTML content length: 874109 characters
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] HTML preview (first 200 chars): <!DOCTYPE html>
custom_backend-1  | <html lang="en">
custom_backend-1  | <head>
custom_backend-1  |     <meta charset="UTF-8">
custom_backend-1  |     <meta name="viewport" content="width=device-width, initial-scale=1.0">
custom_backend-1  |     <title>Event Poster</title>
custom_backend-1  |
custom_backend-1  |     <!-- Google Fonts...
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] HTML preview (last 100 chars): ...–∫–æ—à—Ç–æ–≤–Ω–æ –¥–ª—è —á–ª–µ–Ω—ñ–≤ business club</div>
custom_backend-1  |             </div>
custom_backend-1  |         </div>
custom_backend-1  |     </div>
custom_backend-1  | </body>
custom_backend-1  | </html>
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Content validation:
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr]   - Found elements: ['event-poster', 'Montserrat', 'theme-event-poster', '–í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä']
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] === TEMPLATE SERVICE COMPLETED ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Total duration: 35.79ms
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Final HTML length: 874109 characters
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758285293093-184g2pvkr] Success: Returning generated HTML
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] ‚úÖ HTML generated via template service
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] HTML generation duration: 38.15ms
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] HTML content length: 874109 characters
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] HTML preview (first 200 chars): <!DOCTYPE html>
custom_backend-1  | <html lang="en">
custom_backend-1  | <head>
custom_backend-1  |     <meta charset="UTF-8">
custom_backend-1  |     <meta name="viewport" content="width=device-width, initial-scale=1.0">
custom_backend-1  |     <title>Event Poster</title>
custom_backend-1  |
custom_backend-1  |     <!-- Google Fonts...
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] === IMAGE CONVERSION ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Importing HTML-to-image service...
custom_backend-1  | INFO:app.services.html_to_image_service:Using Playwright for HTML to PNG conversion (most reliable)
custom_backend-1  | INFO:app.services.html_to_image_service:HTML to Image Service initialized using: playwright
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] ‚úÖ HTML-to-image service imported
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Starting HTML-to-PNG conversion...
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Conversion parameters:
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - html_content length: 874109 chars
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - output_path: output/poster_images/poster_image_20250919_123454_bd34dcc9.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - template_id: poster
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] ========== HTML -TO-IMAGE CONVERSION STARTED ==========
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] Timestamp: 2025 -09-19 12:34:54
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] Template ID: po ster
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] Conversion meth od: playwright
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] Target dimensio ns: 1920x1080
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] Output path: ou tput/poster_images/poster_image_20250919_123454_bd34dcc9.png
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] HTML content le ngth: 874109 characters
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] HTML preview (f irst 150 chars): <!DOCTYPE html>
custom_backend-1  | <html lang="en">
custom_backend-1  | <head>
custom_backend-1  |     <meta charset="UTF-8">
custom_backend-1  |     <meta name="viewport" content="width=device-width, initial-scale=1.0">
custom_backend-1  |     <tit...
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] === CONVERSION  METHOD EXECUTION ===
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] Attempting Play wright conversion...
custom_backend-1  | INFO:app.services.html_to_image_service:Using Playwright for HTML to PNG conversion
custom_backend-1  | INFO:app.services.html_to_image_service:Playwright conversion successful: 423043 bytes
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] ‚úÖ Playwright co nversion successful in 3244.29ms
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] === FINAL VERIF ICATION ===
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] ‚úÖ Output file c reated successfully
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] File details:
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster]   - path: outpu t/poster_images/poster_image_20250919_123454_bd34dcc9.png
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster]   - size: 42304 3 bytes
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster]   - modified: 2 025-09-19 12:34:58
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster]   - size catego ry: LARGE
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster]   - file header : 89504e470d0a1a0a0000000d49484452
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster]   - valid PNG:  True
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] === CONVERSION  COMPLETED ===
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] Total processin g time: 3246.36ms
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] Method used: pl aywright
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] Success status:  True
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758285294-poster] File size check : True
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Image conversion completed in 3354.22ms
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Conversion success: True
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] === FILE VALIDATION ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] ‚úÖ Output file exists: output/poster_images/poster_image_20250919_123454_bd34dcc9.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] === FILE ANALYSIS ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] File statistics:
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - size: 423043 bytes
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - modified: 2025-09-19T12:34:58.018119
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - size category: LARGE
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - file header (hex): 89504e470d0a1a0a0000000d49484452
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - PNG signature valid: True
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] ‚úÖ File size validation passed: 423043 bytes
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] === RESPONSE PREPARATION ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Preparing FileResponse...
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Response parameters:
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - path: output/poster_images/poster_image_20250919_123454_bd34dcc9.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - media_type: image/png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - filename: poster_image_20250919_123454_bd34dcc9.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr]   - file_size: 423043 bytes
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] === PROCESS COMPLETED SUCCESSFULLY ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Total processing time: 3410.78ms
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Final file: poster_image_20250919_123454_bd34dcc9.png (423043 bytes)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758285293093-184g2pvkr] Success: Returning FileResponse
custom_backend-1  | INFO:     172.18.0.12:41968 - "POST /api/custom/poster-image/generate HTTP/1.1" 200 OK