üì∑ [POSTER_DOWNLOAD] Starting server-side poster image generation...
page-c1d7da528d654044.js:1 üì∑ [POSTER_DOWNLOAD] Sending poster data to server: {eventName: '–í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è', mainSpeaker: '–î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π', speakerDescription: '–∑–∞—Å–Ω–æ–≤–Ω–∏–∫ QNICORN NEST (Luxemburg), –ø–µ—Ä—à–æ–≥–æ —à—Ç—É—á–Ω–æ‚Ä¶—è —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É—î –ø—Ä–æ—Ü–µ—Å —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ —ñ–Ω–≤–µ—Å—Ç–æ—Ä–∞–º–∏', date: '08.10.2025', topic: '–¢—Ä–µ–Ω–¥–∏ —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ —Ä–∏–Ω–∫—É VC —É 2025-2026 —Ä–æ–∫–∞—Ö',¬†‚Ä¶}
requests.js:1  POST https://dev4.contentbuilder.ai/api/custom-projects-backend/poster-image/generate 500 (Internal Server Error)
(anonymous) @ requests.js:1
(anonymous) @ traffic.js:1
fetch @ traffic.js:1
k @ page-c1d7da528d654044.js:1
iX @ 4bd1b696-4fd0ea18c6d24e6e.js:1
(anonymous) @ 4bd1b696-4fd0ea18c6d24e6e.js:1
nS @ 4bd1b696-4fd0ea18c6d24e6e.js:1
i2 @ 4bd1b696-4fd0ea18c6d24e6e.js:1
s7 @ 4bd1b696-4fd0ea18c6d24e6e.js:1
s5 @ 4bd1b696-4fd0ea18c6d24e6e.js:1Understand this error
1684-77cc8bacad49b839.js:1 üì∑ [POSTER_DOWNLOAD] Error generating poster image: Error: Generated image file is too small
    at k (page-c1d7da528d654044.js:1:8454)
push.66905.window.console.error @ 1684-77cc8bacad49b839.js:1
k @ page-c1d7da528d654044.js:1
await in k
iX @ 4bd1b696-4fd0ea18c6d24e6e.js:1
(anonymous) @ 4bd1b696-4fd0ea18c6d24e6e.js:1
nS @ 4bd1b696-4fd0ea18c6d24e6e.js:1
i2 @ 4bd1b696-4fd0ea18c6d24e6e.js:1
s7 @ 4bd1b696-4fd0ea18c6d24e6e.js:1
s5 @ 4bd1b696-4fd0ea18c6d24e6e.js:1Understand this error
1684-77cc8bacad49b839.js:1 ‚ùå Poster download error: Generated image file is too small

backend logs:
custom_backend-1  | INFO:app.services.pdf_generator:PDF Template Directory expected at: /app/templates
custom_backend-1  | INFO:     Started server process [1]
custom_backend-1  | INFO:     Waiting for application startup.
custom_backend-1  | INFO:main:Custom Backend starting...
custom_backend-1  | INFO:main:'projects' table ensured and updated.
custom_backend-1  | INFO:main:'microproduct_pipelines' table ensured.
custom_backend-1  | INFO:main:'projects' table ensured and updated with 'source_chat_session_id'.
custom_backend-1  | INFO:main:'design_templates' table ensured.
custom_backend-1  | INFO:main:'trashed_projects' table ensured (soft-delete).
custom_backend-1  | INFO:main:'user_credits' table ensured.
custom_backend-1  | INFO:main:Updated credit_transactions table to support admin_removal type
custom_backend-1  | INFO:main:'credit_transactions' table ensured.
custom_backend-1  | INFO:main:Attempting to connect to Onyx database: postgresql://postgres:ookBossyauptyetPaxTy@relational_db:5432/onyx_db
custom_backend-1  | INFO:main:Trying to connect to: postgresql://postgres:ookBossyauptyetPaxTy@relational_db:5432/onyx_db
custom_backend-1  | WARNING:main:Failed to connect to postgresql://postgres:ookBossyauptyetPaxTy@relational_db:5432/onyx_db: database "onyx_db" does not exist
custom_backend-1  | INFO:main:Trying to connect to: postgresql://postgres:ookBossyauptyetPaxTy@relational_db:5432/postgres
custom_backend-1  | INFO:main:Found 3 Onyx users to migrate
custom_backend-1  | INFO:main:Populated user_credits table with 3 existing Onyx users (100 credits each).
custom_backend-1  | INFO:main:Added quality_tier column to project_folders table
custom_backend-1  | INFO:main:Updated existing folders with default 'medium' tier
custom_backend-1  | INFO:main:Created index for quality_tier column
custom_backend-1  | INFO:main:Added custom_rate column to project_folders table
custom_backend-1  | INFO:main:Updated existing folders with default custom_rate
custom_backend-1  | INFO:main:Created index for custom_rate column
custom_backend-1  | INFO:main:Added custom_rate and quality_tier columns to projects table
custom_backend-1  | INFO:main:Created indexes for project-level custom_rate and quality_tier columns
custom_backend-1  | INFO:main:Added custom_rate and quality_tier columns to trashed_projects table
custom_backend-1  | INFO:main:Applying critical fix: Ensuring order and completion_time columns are TEXT type
custom_backend-1  | INFO:main:Successfully set projects.order and projects.completion_time to TEXT type
custom_backend-1  | INFO:main:Successfully set trashed_projects.order and trashed_projects.completion_time to TEXT type
custom_backend-1  | INFO:main:Successfully set default values for empty order and completion_time fields
custom_backend-1  | INFO:main:Projects table schema verification:
custom_backend-1  | INFO:main:  completion_time: text (nullable: YES)
custom_backend-1  | INFO:main:  folder_id: integer (nullable: YES)
custom_backend-1  | INFO:main:  order: text (nullable: YES)
custom_backend-1  | INFO:main:  source_chat_session_id: uuid (nullable: YES)
custom_backend-1  | INFO:main:Trashed_projects table schema verification:
custom_backend-1  | INFO:main:  completion_time: text (nullable: YES)
custom_backend-1  | INFO:main:  folder_id: integer (nullable: YES)
custom_backend-1  | INFO:main:  order: text (nullable: YES)
custom_backend-1  | INFO:main:  source_chat_session_id: uuid (nullable: YES)
custom_backend-1  | INFO:main:'request_analytics' table ensured.
custom_backend-1  | INFO:main:AI parser tracking columns added to request_analytics table.
custom_backend-1  | INFO:main:Added is_standalone column to projects table.
custom_backend-1  | INFO:main:Added is_standalone column to trashed_projects table.
custom_backend-1  | INFO:main:Legacy support: is_standalone field defaults to NULL for existing products.
custom_backend-1  | INFO:main:Database schema migration completed successfully.
custom_backend-1  | INFO:     Application startup complete.
custom_backend-1  | INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:39992 - "GET /api/custom/projects HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:40000 - "GET /api/custom/projects/folders HTTP/1.1" 200 OK
custom_backend-1  | INFO:     172.18.0.12:40014 - "GET /api/custom/projects/folders HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:40042 - "GET /api/custom/credits/me HTTP/1.1" 200 OK
custom_backend-1  | INFO:     172.18.0.12:40052 - "GET /api/custom/projects/90/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:     172.18.0.12:40026 - "GET /api/custom/projects HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:40066 - "GET /api/custom/projects/89/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:40068 - "GET /api/custom/projects/85/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:40076 - "GET /api/custom/projects/84/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:40090 - "GET /api/custom/projects/83/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:40100 - "GET /api/custom/projects/82/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Starting poster image generation request
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Received poster data
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Validated required fields successfully
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Event: –í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Speaker: –î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Output path: output/poster_images/poster_image_20250919_100548_0091579d.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Generated HTML template (874748 characters)
custom_backend-1  | WARNING:app.services.html_to_image_service:No specialized HTML-to-image libraries found, using simple fallback method
custom_backend-1  | INFO:app.services.html_to_image_service:HTML to Image Service initialized using: simple
custom_backend-1  | INFO:app.services.html_to_image_service:Converting HTML to PNG for template: poster using simple
custom_backend-1  | WARNING:app.services.html_to_image_service:Using simple fallback method - may not produce high quality results
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Successfully generated poster image: output/poster_images/poster_image_20250919_100548_0091579d.png (69 bytes)
custom_backend-1  | ERROR:main:üì∑ [POSTER_IMAGE] Generated file too small: 69 bytes
custom_backend-1  | INFO:     172.18.0.12:38230 - "POST /api/custom/poster-image/generate HTTP/1.1" 500 Internal Server Error
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Starting poster image generation request
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Received poster data
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Validated required fields successfully
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Event: –í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Speaker: –î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Output path: output/poster_images/poster_image_20250919_100615_9d0dc6e7.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Generated HTML template (874748 characters)
custom_backend-1  | INFO:app.services.html_to_image_service:Converting HTML to PNG for template: poster using simple
custom_backend-1  | WARNING:app.services.html_to_image_service:Using simple fallback method - may not produce high quality results
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Successfully generated poster image: output/poster_images/poster_image_20250919_100615_9d0dc6e7.png (69 bytes)
custom_backend-1  | ERROR:main:üì∑ [POSTER_IMAGE] Generated file too small: 69 bytes
custom_backend-1  | INFO:     172.18.0.12:34510 - "POST /api/custom/poster-image/generate HTTP/1.1" 500 Internal Server Error