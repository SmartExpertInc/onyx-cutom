backend:
custom_backend-1  | INFO:app.services.pdf_generator:PDF Template Directory expected at: /app/app/templates
custom_backend-1  | INFO:     Started server process [1]
custom_backend-1  | INFO:     Waiting for application startup.
custom_backend-1  | INFO:main:Custom Backend starting...
custom_backend-1  | INFO:main:'projects' table ensured and updated.
custom_backend-1  | INFO:main:'microproduct_pipelines' table ensured.
custom_backend-1  | INFO:main:'projects' table ensured and updated with 'source_chat_session_id'.
custom_backend-1  | INFO:main:'design_templates' table ensured.
custom_backend-1  | INFO:main:'trashed_projects' table ensured (soft-delete).
custom_backend-1  | INFO:main:'user_credits' table ensured.
custom_backend-1  | INFO:main:Updated credit_transactions table to support admin_removal type
custom_backend-1  | INFO:main:'credit_transactions' table ensured.
custom_backend-1  | INFO:main:Attempting to connect to Onyx database: postgresql://postgres:ookBossyauptyetPaxTy@relational_db:5432/onyx_db
custom_backend-1  | INFO:main:Trying to connect to: postgresql://postgres:ookBossyauptyetPaxTy@relational_db:5432/onyx_db
custom_backend-1  | WARNING:main:Failed to connect to postgresql://postgres:ookBossyauptyetPaxTy@relational_db:5432/onyx_db: database "onyx_db" does not exist
custom_backend-1  | INFO:main:Trying to connect to: postgresql://postgres:ookBossyauptyetPaxTy@relational_db:5432/postgres
custom_backend-1  | INFO:main:Found 3 Onyx users to migrate
custom_backend-1  | INFO:main:Populated user_credits table with 3 existing Onyx users (100 credits each).
custom_backend-1  | INFO:main:Added quality_tier column to project_folders table
custom_backend-1  | INFO:main:Updated existing folders with default 'medium' tier
custom_backend-1  | INFO:main:Created index for quality_tier column
custom_backend-1  | INFO:main:Added custom_rate column to project_folders table
custom_backend-1  | INFO:main:Updated existing folders with default custom_rate
custom_backend-1  | INFO:main:Created index for custom_rate column
custom_backend-1  | INFO:main:Added custom_rate and quality_tier columns to projects table
custom_backend-1  | INFO:main:Created indexes for project-level custom_rate and quality_tier columns
custom_backend-1  | INFO:main:Added custom_rate and quality_tier columns to trashed_projects table
custom_backend-1  | INFO:main:Applying critical fix: Ensuring order and completion_time columns are TEXT type
custom_backend-1  | INFO:main:Successfully set projects.order and projects.completion_time to TEXT type
custom_backend-1  | INFO:main:Successfully set trashed_projects.order and trashed_projects.completion_time to TEXT type
custom_backend-1  | INFO:main:Successfully set default values for empty order and completion_time fields
custom_backend-1  | INFO:main:Projects table schema verification:
custom_backend-1  | INFO:main:  completion_time: text (nullable: YES)
custom_backend-1  | INFO:main:  folder_id: integer (nullable: YES)
custom_backend-1  | INFO:main:  order: text (nullable: YES)
custom_backend-1  | INFO:main:  source_chat_session_id: uuid (nullable: YES)
custom_backend-1  | INFO:main:Trashed_projects table schema verification:
custom_backend-1  | INFO:main:  completion_time: text (nullable: YES)
custom_backend-1  | INFO:main:  folder_id: integer (nullable: YES)
custom_backend-1  | INFO:main:  order: text (nullable: YES)
custom_backend-1  | INFO:main:  source_chat_session_id: uuid (nullable: YES)
custom_backend-1  | INFO:main:'request_analytics' table ensured.
custom_backend-1  | INFO:main:AI parser tracking columns added to request_analytics table.
custom_backend-1  | INFO:main:Added is_standalone column to projects table.
custom_backend-1  | INFO:main:Added is_standalone column to trashed_projects table.
custom_backend-1  | INFO:main:Legacy support: is_standalone field defaults to NULL for existing products.
custom_backend-1  | INFO:main:Database schema migration completed successfully.
custom_backend-1  | INFO:     Application startup complete.
custom_backend-1  | INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:35856 - "GET /api/custom/credits/me HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:35870 - "GET /api/custom/projects HTTP/1.1" 200 OK
custom_backend-1  | INFO:     172.18.0.12:35874 - "GET /api/custom/projects/folders HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:35876 - "GET /api/custom/projects/folders HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:35884 - "GET /api/custom/projects HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:35886 - "GET /api/custom/projects/90/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:35894 - "GET /api/custom/projects/89/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:35896 - "GET /api/custom/projects/85/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:35908 - "GET /api/custom/projects/84/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:35916 - "GET /api/custom/projects/83/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:httpx:HTTP Request: GET http://api_server:8080/me "HTTP/1.1 200 OK"
custom_backend-1  | INFO:     172.18.0.12:56002 - "GET /api/custom/projects/82/lesson-data HTTP/1.1" 200 OK
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] ========== BACKEND POSTER GENERATION STARTED ==========
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Timestamp: 2025-09-19T12:28:29.786301
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Request method: POST
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Request URL: http://dev4.contentbuilder.ai/api/custom/poster-image/generate
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Client host: 172.18.0.12
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] User agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] === PARSING REQUEST DATA ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] ‚úÖ Successfully parsed JSON request body
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] === REQUEST DATA ANALYSIS ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Total fields in request: 14
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - eventName: "–í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è" (type: str, length: 25)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - mainSpeaker: "–î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π" (type: str, length: 16)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - speakerDescription: "–∑–∞—Å–Ω–æ–≤–Ω–∏–∫ QNICORN NEST (Luxemburg), –ø–µ—Ä—à–æ–≥–æ —à—Ç—É—á–Ω–æ–≥–æ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É, —è–∫–∏–π –≤–∂–µ 8 —Ä–æ–∫—ñ–≤ —à—É–∫–∞—î —Ñ—ñ–Ω–∞–Ω—Å—É–≤–∞–Ω–Ω—è ..." (type: str, length: 147)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - date: "08.10.2025" (type: str, length: 10)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - topic: "–¢—Ä–µ–Ω–¥–∏ —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ —Ä–∏–Ω–∫—É VC —É 2025-2026 —Ä–æ–∫–∞—Ö" (type: str, length: 47)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - additionalSpeakers: "–¢–∞ —â–µ 4 –∑—ñ—Ä–∫–æ–≤–∏—Ö —Å–ø—ñ–∫–µ—Ä—ñ–≤: –°–µ—Ä–≥—ñ–π –†–∞–±–µ–Ω–∫–æ, –û–ª–µ–∫—Å–∞–Ω–¥—Ä –ë–æ—Ä–Ω—è–∫–æ–≤, –ê–Ω—Ç–æ–Ω –í–∞–π—Å–±—É—Ä–¥ —Ç–∞ –ê–Ω–¥—Ä—ñ–π –õ–∞–∑–æ—Ä–µ–Ω–∫–æ" (type: str, length: 97)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - ticketPrice: "150‚Ç¨" (type: str, length: 4)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - ticketType: "STANDART" (type: str, length: 8)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - freeAccessConditions: "–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –¥–ª—è —á–ª–µ–Ω—ñ–≤ business club" (type: str, length: 36)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - speakerImageSrc: [base64 data, length: 864114 chars]
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - format: "poster" (type: str, length: 6)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - dimensions: "{'width': 1000, 'height': 1000}" (type: dict, length: 31)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - sessionId: "poster-1758284906035-e955dglhv" (type: str, length: 30)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE]   - clientTimestamp: "2025-09-19T12:28:26.035Z" (type: str, length: 24)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] Session ID: poster-1758284906035-e955dglhv
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] === FIELD VALIDATION ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Required fields: ['eventName', 'mainSpeaker', 'date', 'topic']
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - eventName: ‚úÖ VALID (value: "–í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è")
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - mainSpeaker: ‚úÖ VALID (value: "–î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π")
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - date: ‚úÖ VALID (value: "08.10.2025")
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - topic: ‚úÖ VALID (value: "–¢—Ä–µ–Ω–¥–∏ —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ —Ä–∏–Ω–∫—É VC —É 2025-2026 —Ä–æ–∫–∞—Ö")
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] ‚úÖ All required fields validated successfully
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] === KEY POSTER DATA ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Event: –í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Speaker: –î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Date: 08.10.2025
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Topic: –¢—Ä–µ–Ω–¥–∏ —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ —Ä–∏–Ω–∫—É VC —É 2025-2026 —Ä–æ–∫–∞—Ö
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Format: poster
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Dimensions: {'width': 1000, 'height': 1000}
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] === FILE SYSTEM SETUP ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Filename components:
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - timestamp: 20250919_122829
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - poster_id: 5e7f0e8e
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - output_filename: poster_image_20250919_122829_5e7f0e8e.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Creating output directory: /app/output/poster_images
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] ‚úÖ Output directory created/verified
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Full output path: output/poster_images/poster_image_20250919_122829_5e7f0e8e.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Directory exists: True
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Directory is writable: True
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] === HTML GENERATION ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Attempting to import template service...
custom_backend-1  | INFO:app.services.poster_template_service:Poster Template Service initialized with Jinja2
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] ‚úÖ Template service imported successfully
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Calling template service to generate HTML...
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] ========== TEMPLATE SERVICE STARTED ==========
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Timestamp: 2025-09-19 12:28:29
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Input data analysis:
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - Total fields: 14
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - Data keys: ['eventName', 'mainSpeaker', 'speakerDescription', 'date', 'topic', 'additionalSpeakers', 'ticketPrice', 'ticketType', 'freeAccessConditions', 'speakerImageSrc', 'format', 'dimensions', 'sessionId', 'clientTimestamp']
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - eventName: "–í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - mainSpeaker: "–î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - speakerDescription: "–∑–∞—Å–Ω–æ–≤–Ω–∏–∫ QNICORN NEST (Luxemburg), –ø–µ—Ä—à–æ–≥–æ —à—Ç—É—á–Ω–æ..." (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - date: "08.10.2025" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - topic: "–¢—Ä–µ–Ω–¥–∏ —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ —Ä–∏–Ω–∫—É VC —É 2025-2026 —Ä–æ–∫–∞—Ö" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - additionalSpeakers: "–¢–∞ —â–µ 4 –∑—ñ—Ä–∫–æ–≤–∏—Ö —Å–ø—ñ–∫–µ—Ä—ñ–≤: –°–µ—Ä–≥—ñ–π –†–∞–±–µ–Ω–∫–æ, –û–ª–µ–∫—Å–∞–Ω..." (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - ticketPrice: "150‚Ç¨" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - ticketType: "STANDART" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - freeAccessConditions: "–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –¥–ª—è —á–ª–µ–Ω—ñ–≤ business club" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - speakerImageSrc: [base64 image data, 864114 chars]
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - format: "poster" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - dimensions: "{'width': 1000, 'height': 1000}" (type: dict)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - sessionId: "poster-1758284906035-e955dglhv" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - clientTimestamp: "2025-09-19T12:28:26.035Z" (type: str)
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] === ENVIRONMENT CHECK ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] ‚úÖ Jinja2 environment is available
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Environment type: <class 'jinja2.environment.Environment'>
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] === TEMPLATE LOADING ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] ‚úÖ Template loaded successfully in 10.93ms
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Template name: event_poster_template.html
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Template object: <class 'jinja2.environment.Template'>
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] === CONTEXT PREPARATION ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Context data prepared in 0.00ms
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Context fields: 11
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - eventName: "–í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - mainSpeaker: "–î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - speakerDescription: "–∑–∞—Å–Ω–æ–≤–Ω–∏–∫ QNICORN NEST (Luxemburg), –ø–µ—Ä—à–æ–≥–æ —à—Ç—É—á–Ω–æ..."
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - date: "08.10.2025"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - topic: "–¢—Ä–µ–Ω–¥–∏ —Ç–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ —Ä–∏–Ω–∫—É VC —É 2025-2026 —Ä–æ–∫–∞—Ö"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - additionalSpeakers: "–¢–∞ —â–µ 4 –∑—ñ—Ä–∫–æ–≤–∏—Ö —Å–ø—ñ–∫–µ—Ä—ñ–≤: –°–µ—Ä–≥—ñ–π –†–∞–±–µ–Ω–∫–æ, –û–ª–µ–∫—Å–∞–Ω..."
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - ticketPrice: "150‚Ç¨"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - ticketType: "STANDART"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - freeAccessConditions: "–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –¥–ª—è —á–ª–µ–Ω—ñ–≤ business club"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - speakerImageSrc: [base64 data, 864114 chars]
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - theme: "event-poster"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] === DATE PARSING ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Original date: "08.10.2025"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Date parts: ['08', '10', '2025']
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Date parsing completed in 0.05ms
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Parsed date components:
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - dayMonth: "08.10"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - year: "2025"
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] === FINAL CONTEXT SUMMARY ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Event: –í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Speaker: –î–µ–Ω–∏—Å –î–æ–≤–≥–æ–ø–æ–ª–∏–π
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Theme: event-poster
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Total context keys: 13
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] === TEMPLATE RENDERING ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Starting template render with 13 context variables...
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] ‚úÖ Template rendered successfully in 7.15ms
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] HTML content length: 874109 characters
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] HTML preview (first 200 chars): <!DOCTYPE html>
custom_backend-1  | <html lang="en">
custom_backend-1  | <head>
custom_backend-1  |     <meta charset="UTF-8">
custom_backend-1  |     <meta name="viewport" content="width=device-width, initial-scale=1.0">
custom_backend-1  |     <title>Event Poster</title>
custom_backend-1  |
custom_backend-1  |     <!-- Google Fonts...
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] HTML preview (last 100 chars): ...–∫–æ—à—Ç–æ–≤–Ω–æ –¥–ª—è —á–ª–µ–Ω—ñ–≤ business club</div>
custom_backend-1  |             </div>
custom_backend-1  |         </div>
custom_backend-1  |     </div>
custom_backend-1  | </body>
custom_backend-1  | </html>
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Content validation:
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv]   - Found elements: ['event-poster', 'Montserrat', 'theme-event-poster', '–í–µ–ª–∏–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–µ—Ä']
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] === TEMPLATE SERVICE COMPLETED ===
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Total duration: 21.38ms
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Final HTML length: 874109 characters
custom_backend-1  | INFO:app.services.poster_template_service:üé¨ [POSTER_TEMPLATE] [poster-1758284906035-e955dglhv] Success: Returning generated HTML
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] ‚úÖ HTML generated via template service
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] HTML generation duration: 22.70ms
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] HTML content length: 874109 characters
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] HTML preview (first 200 chars): <!DOCTYPE html>
custom_backend-1  | <html lang="en">
custom_backend-1  | <head>
custom_backend-1  |     <meta charset="UTF-8">
custom_backend-1  |     <meta name="viewport" content="width=device-width, initial-scale=1.0">
custom_backend-1  |     <title>Event Poster</title>
custom_backend-1  |
custom_backend-1  |     <!-- Google Fonts...
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] === IMAGE CONVERSION ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Importing HTML-to-image service...
custom_backend-1  | INFO:app.services.html_to_image_service:Using Playwright for HTML to PNG conversion (most reliable)
custom_backend-1  | INFO:app.services.html_to_image_service:HTML to Image Service initialized using: playwright
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] ‚úÖ HTML-to-image service imported
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Starting HTML-to-PNG conversion...
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Conversion parameters:
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - html_content length: 874109 chars
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - output_path: output/poster_images/poster_image_20250919_122829_5e7f0e8e.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - template_id: poster
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] ========== HTML -TO-IMAGE CONVERSION STARTED ==========
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] Timestamp: 2025 -09-19 12:28:29
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] Template ID: po ster
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] Conversion meth od: playwright
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] Target dimensio ns: 1920x1080
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] Output path: ou tput/poster_images/poster_image_20250919_122829_5e7f0e8e.png
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] HTML content le ngth: 874109 characters
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] HTML preview (f irst 150 chars): <!DOCTYPE html>
custom_backend-1  | <html lang="en">
custom_backend-1  | <head>
custom_backend-1  |     <meta charset="UTF-8">
custom_backend-1  |     <meta name="viewport" content="width=device-width, initial-scale=1.0">
custom_backend-1  |     <tit...
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] === CONVERSION  METHOD EXECUTION ===
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] Attempting Play wright conversion...
custom_backend-1  | INFO:app.services.html_to_image_service:Using Playwright for HTML to PNG conversion
custom_backend-1  | ERROR:app.services.html_to_image_service:Playwright conversion error: screenshot() got an unexpected keyword argument 'width'
custom_backend-1  | WARNING:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] ‚ùå Playwright  failed after 3341.74ms, falling back to simple method
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE_SIMPLE] [simple-1758284913] === SIMPLE FA LLBACK METHOD STARTED ===
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE_SIMPLE] [simple-1758284913] Using enhance d fallback method for HTML to PNG conversion
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE_SIMPLE] [simple-1758284913] HTML content  length: 874109 characters
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE_SIMPLE] [simple-1758284913] Output path:  output/poster_images/poster_image_20250919_122829_5e7f0e8e.png
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE_SIMPLE] [simple-1758284913] Attempting Pi llow-based rendering...
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE_SIMPLE] [simple-1758284913] PIL modules i mported successfully
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE_SIMPLE] [simple-1758284913] Created 1000x 1000 white background image
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE_SIMPLE] [simple-1758284913] Saving image  to: output/poster_images/poster_image_20250919_122829_5e7f0e8e.png
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE_SIMPLE] [simple-1758284913] ‚úÖ Pillow fall back conversion successful in 140.20ms: 14968 bytes
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] Fallback comple ted in 141.02ms, success: True
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] === FINAL VERIF ICATION ===
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] ‚úÖ Output file c reated successfully
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] File details:
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster]   - path: outpu t/poster_images/poster_image_20250919_122829_5e7f0e8e.png
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster]   - size: 14968  bytes
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster]   - modified: 2 025-09-19 12:28:33
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster]   - size catego ry: MEDIUM
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster]   - file header : 89504e470d0a1a0a0000000d49484452
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster]   - valid PNG:  True
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] === CONVERSION  COMPLETED ===
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] Total processin g time: 3483.22ms
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] Method used: pl aywright+simple
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] Success status:  True
custom_backend-1  | INFO:app.services.html_to_image_service:üñºÔ∏è [HTML_TO_IMAGE] [conv-1758284909-poster] File size check : True
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Image conversion completed in 3631.83ms
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Conversion success: True
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] === FILE VALIDATION ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] ‚úÖ Output file exists: output/poster_images/poster_image_20250919_122829_5e7f0e8e.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] === FILE ANALYSIS ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] File statistics:
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - size: 14968 bytes
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - modified: 2025-09-19T12:28:33.450669
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - size category: MEDIUM
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - file header (hex): 89504e470d0a1a0a0000000d49484452
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - PNG signature valid: True
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] ‚úÖ File size validation passed: 14968 bytes
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] === RESPONSE PREPARATION ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Preparing FileResponse...
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Response parameters:
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - path: output/poster_images/poster_image_20250919_122829_5e7f0e8e.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - media_type: image/png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - filename: poster_image_20250919_122829_5e7f0e8e.png
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv]   - file_size: 14968 bytes
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] === PROCESS COMPLETED SUCCESSFULLY ===
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Total processing time: 3670.14ms
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Final file: poster_image_20250919_122829_5e7f0e8e.png (14968 bytes)
custom_backend-1  | INFO:main:üì∑ [POSTER_IMAGE] [poster-1758284906035-e955dglhv] Success: Returning FileResponse
custom_backend-1  | INFO:     172.18.0.12:41478 - "POST /api/custom/poster-image/generate HTTP/1.1" 200 OK